{"ast":null,"code":"import{useState,useEffect,useContext}from\"react\";import{BrowserRouter,Route,Switch,Redirect}from\"react-router-dom\";import{Header}from\"../header\";import{Footer}from\"../footer\";import{SignIn}from\"../sign-in\";import{SignUp}from\"../sign-up\";import{MainPage}from\"../main-page\";import{ProfilePage}from\"../profile-page\";import{UserPage}from\"../user-page\";import{SearchPage}from\"../search-page\";import{WishlistPage}from\"../wishlist-page\";import{GiftPage}from\"../gift-page\";import{getOwnUser}from\"../../utils/api\";import{PrivateRoute}from\"../private-route\";import{SearchBar}from\"../search-bar\";import{UserContext}from\"../../utils/context\";import styles from\"./app.module.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[userCtx,setUserCtx]=useState(null);useEffect(()=>{if(sessionStorage.getItem(\"auth_token\")){getOwnUser().then(res=>{setUserCtx(res);});}else{setUserCtx({});}},[]);return/*#__PURE__*/_jsx(\"div\",{className:styles.app,children:/*#__PURE__*/_jsx(UserContext.Provider,{value:[userCtx,setUserCtx],children:/*#__PURE__*/_jsx(ApplicationView,{})})});}const ApplicationView=()=>{const[userCtx]=useContext(UserContext);const[query,setQuery]=useState(\"\");const[queryHits,setQueryHits]=useState({query:\"\",hits:[]});const redirectTo=userCtx&&userCtx.id?\"/gifts/line\":\"/signin\";const changeQuery=e=>{setQuery(e.target.value);};if(!userCtx){return/*#__PURE__*/_jsx(_Fragment,{});}return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:styles.content,children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/search\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(SearchPage,{query:query,queryHits:queryHits})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/gifts\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(MainPage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/profile\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(ProfilePage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/users/:username\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(UserPage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/wishlist\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(WishlistPage,{})]}),/*#__PURE__*/_jsxs(PrivateRoute,{path:\"/gift/:id\",children:[/*#__PURE__*/_jsx(SearchBar,{query:query,changeQuery:changeQuery,setQueryHits:setQueryHits}),/*#__PURE__*/_jsx(GiftPage,{})]}),/*#__PURE__*/_jsx(Redirect,{exact:true,from:\"/\",to:redirectTo})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default App;","map":{"version":3,"names":["useState","useEffect","useContext","BrowserRouter","Route","Switch","Redirect","Header","Footer","SignIn","SignUp","MainPage","ProfilePage","UserPage","SearchPage","WishlistPage","GiftPage","getOwnUser","PrivateRoute","SearchBar","UserContext","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","userCtx","setUserCtx","sessionStorage","getItem","then","res","className","app","children","Provider","value","ApplicationView","query","setQuery","queryHits","setQueryHits","hits","redirectTo","id","changeQuery","e","target","content","path","exact","from","to"],"sources":["/Users/alenasenozenskaya/nodejs-docker-and-compose/frontend/src/components/app/app.js"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\n\nimport { Header } from \"../header\";\nimport { Footer } from \"../footer\";\nimport { SignIn } from \"../sign-in\";\nimport { SignUp } from \"../sign-up\";\nimport { MainPage } from \"../main-page\";\nimport { ProfilePage } from \"../profile-page\";\nimport { UserPage } from \"../user-page\";\nimport { SearchPage } from \"../search-page\";\nimport { WishlistPage } from \"../wishlist-page\";\nimport { GiftPage } from \"../gift-page\";\nimport { getOwnUser } from \"../../utils/api\";\nimport { PrivateRoute } from \"../private-route\";\nimport { SearchBar } from \"../search-bar\";\n\nimport { UserContext } from \"../../utils/context\";\n\nimport styles from \"./app.module.css\";\n\nfunction App() {\n  const [userCtx, setUserCtx] = useState(null);\n\n  useEffect(() => {\n    if (sessionStorage.getItem(\"auth_token\")) {\n      getOwnUser().then((res) => {\n        setUserCtx(res);\n      });\n    } else {\n      setUserCtx({});\n    }\n  }, []);\n\n  return (\n    <div className={styles.app}>\n      <UserContext.Provider value={[userCtx, setUserCtx]}>\n        <ApplicationView />\n      </UserContext.Provider>\n    </div>\n  );\n}\n\nconst ApplicationView = () => {\n  const [userCtx] = useContext(UserContext);\n  const [query, setQuery] = useState(\"\");\n  const [queryHits, setQueryHits] = useState({\n    query: \"\",\n    hits: [],\n  });\n\n  const redirectTo = userCtx && userCtx.id ? \"/gifts/line\" : \"/signin\";\n\n  const changeQuery = (e) => {\n    setQuery(e.target.value);\n  };\n\n  if (!userCtx) {\n    return <></>;\n  }\n\n  return (\n    <BrowserRouter>\n      <Header />\n      <main className={styles.content}>\n        <Switch>\n          <Route path=\"/signin\">\n            <SignIn />\n          </Route>\n          <Route path=\"/signup\">\n            <SignUp />\n          </Route>\n          <PrivateRoute path=\"/search\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <SearchPage query={query} queryHits={queryHits} />\n          </PrivateRoute>\n          <PrivateRoute path=\"/gifts\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <MainPage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/profile\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <ProfilePage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/users/:username\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <UserPage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/wishlist\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <WishlistPage />\n          </PrivateRoute>\n          <PrivateRoute path=\"/gift/:id\">\n            <SearchBar\n              query={query}\n              changeQuery={changeQuery}\n              setQueryHits={setQueryHits}\n            />\n            <GiftPage />\n          </PrivateRoute>\n          <Redirect exact from=\"/\" to={redirectTo} />\n        </Switch>\n      </main>\n      <Footer />\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}