{"ast":null,"code":"import{useState,useEffect,useContext}from\"react\";import{Route,useRouteMatch,useLocation,Redirect}from\"react-router-dom\";import{Collection}from\"../collection\";import{Subheader}from\"./subheader\";import{CollectionsView}from\"./collections-view\";import{CardListView}from\"./card-lists-view\";import{getLastCards,getOwnWishes,getTopCards}from\"../../utils/api\";import{findOwnedIds}from\"../../utils/functions\";import{UserContext}from\"../../utils/context\";import styles from\"./main-page.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const MainPage=_ref=>{let{extraClass=\"\"}=_ref;const[user]=useContext(UserContext);const[lastCards,setLastCards]=useState([]);const[topCards,setTopCards]=useState([]);const[ownWishes,setOwnWishes]=useState([]);const{path,url}=useRouteMatch();const location=useLocation();const isLogin=!!user.id;useEffect(()=>{Promise.all([getLastCards(),getTopCards(),getOwnWishes()]).then(_ref2=>{let[last,top,ownWishes]=_ref2;setLastCards(last);setTopCards(top);setOwnWishes(ownWishes);});},[]);const ownedTopCardsIds=findOwnedIds(ownWishes,topCards);const ownedLastCardsIds=findOwnedIds(ownWishes,lastCards);const linePath=\"\".concat(path,\"/line\");const collectionsPath=\"\".concat(path,\"/collections\");return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.content,\" \").concat(extraClass),children:[/*#__PURE__*/_jsx(Subheader,{path:path,location:location,isLogin:isLogin}),/*#__PURE__*/_jsx(Route,{path:linePath,render:()=>/*#__PURE__*/_jsx(CardListView,{lastCards:lastCards,topCards:topCards,isLogin:isLogin,ownedTopCards:ownedTopCardsIds,ownedLastCards:ownedLastCardsIds})}),/*#__PURE__*/_jsx(Route,{exact:true,path:collectionsPath,render:()=>/*#__PURE__*/_jsx(CollectionsView,{url:url,ownWishes:ownWishes})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(path,\"/collections/:id\"),render:()=>/*#__PURE__*/_jsx(Collection,{})})]});};","map":{"version":3,"names":["useState","useEffect","useContext","Route","useRouteMatch","useLocation","Redirect","Collection","Subheader","CollectionsView","CardListView","getLastCards","getOwnWishes","getTopCards","findOwnedIds","UserContext","styles","jsx","_jsx","jsxs","_jsxs","MainPage","_ref","extraClass","user","lastCards","setLastCards","topCards","setTopCards","ownWishes","setOwnWishes","path","url","location","isLogin","id","Promise","all","then","_ref2","last","top","ownedTopCardsIds","ownedLastCardsIds","linePath","concat","collectionsPath","className","content","children","render","ownedTopCards","ownedLastCards","exact"],"sources":["/Users/alenasenozenskaya/nodejs-docker-and-compose/frontend/src/components/main-page/main-page.jsx"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { Route, useRouteMatch, useLocation, Redirect } from \"react-router-dom\";\n\nimport { Collection } from \"../collection\";\nimport { Subheader } from \"./subheader\";\nimport { CollectionsView } from \"./collections-view\";\nimport { CardListView } from \"./card-lists-view\";\n\nimport { getLastCards, getOwnWishes, getTopCards } from \"../../utils/api\";\nimport { findOwnedIds } from \"../../utils/functions\";\nimport { UserContext } from \"../../utils/context\";\n\nimport styles from \"./main-page.module.css\";\n\nexport const MainPage = ({ extraClass = \"\" }) => {\n  const [user] = useContext(UserContext);\n  const [lastCards, setLastCards] = useState([]);\n  const [topCards, setTopCards] = useState([]);\n  const [ownWishes, setOwnWishes] = useState([]);\n\n  const { path, url } = useRouteMatch();\n  const location = useLocation();\n  const isLogin = !!user.id;\n\n  useEffect(() => {\n    Promise.all([getLastCards(), getTopCards(), getOwnWishes()]).then(\n      ([last, top, ownWishes]) => {\n        setLastCards(last);\n        setTopCards(top);\n        setOwnWishes(ownWishes);\n      }\n    );\n  }, []);\n\n  const ownedTopCardsIds = findOwnedIds(ownWishes, topCards);\n  const ownedLastCardsIds = findOwnedIds(ownWishes, lastCards);\n\n  const linePath = `${path}/line`;\n  const collectionsPath = `${path}/collections`;\n\n  return (\n    <div className={`${styles.content} ${extraClass}`}>\n      <Subheader path={path} location={location} isLogin={isLogin} />\n      <Route\n        path={linePath}\n        render={() => (\n          <CardListView\n            lastCards={lastCards}\n            topCards={topCards}\n            isLogin={isLogin}\n            ownedTopCards={ownedTopCardsIds}\n            ownedLastCards={ownedLastCardsIds}\n          />\n        )}\n      />\n      <Route\n        exact\n        path={collectionsPath}\n        render={() => <CollectionsView url={url} ownWishes={ownWishes} />}\n      />\n      <Route path={`${path}/collections/:id`} render={() => <Collection />} />\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}