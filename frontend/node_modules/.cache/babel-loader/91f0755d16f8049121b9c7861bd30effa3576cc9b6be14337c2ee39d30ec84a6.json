{"ast":null,"code":"import _objectSpread from\"/Users/alenasenozenskaya/nodejs-docker-and-compose/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useContext}from\"react\";import{NavLink,useHistory}from\"react-router-dom\";import{Input,Button}from\"../ui\";import{getOwnUser,loginUser}from\"../../utils/api\";import{UserContext}from\"../../utils/context\";import{MINIMUM_USERNAME_LENGTH,MINIMUM_PASSWORD_LENGTH}from\"../../utils/constants\";import styles from\"./sign-in.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const SignIn=_ref=>{let{extraClass=\"\"}=_ref;const[_userCtx,setUserCtx]=useContext(UserContext);const[userData,setUserData]=useState({username:\"\",password:\"\"});const[errorMessage,setErrorMessage]=useState(\"\");const history=useHistory();const usernameValid=userData.username.length>=MINIMUM_USERNAME_LENGTH;const passwordValid=userData.password.length>=MINIMUM_PASSWORD_LENGTH;const submitDisabled=!usernameValid||!passwordValid;const onChangeInput=e=>{setUserData(_objectSpread(_objectSpread({},userData),{},{[e.target.name]:e.target.value}));};const authorizeUser=async event=>{event.preventDefault();errorMessage&&setErrorMessage(\"\");try{const response=await loginUser(userData.username,userData.password);if(response&&response.access_token){const user=await getOwnUser();setUserCtx(user);history.replace({pathname:\"/gifts/line\"});}}catch(err){setErrorMessage(err.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.content,\" \").concat(extraClass),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text text_type_h2 text_color_primary mb-16 \".concat(styles.title),children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:authorizeUser,children:[/*#__PURE__*/_jsx(Input,{name:\"username\",type:\"text\",id:1,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",label:\"\\u042E\\u0437\\u0435\\u0440\\u043D\\u0435\\u0439\\u043C\",onChange:onChangeInput,extraClass:\"mb-16\",minLength:MINIMUM_USERNAME_LENGTH,required:true}),/*#__PURE__*/_jsx(Input,{name:\"password\",type:\"password\",id:2,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:onChangeInput,minLength:MINIMUM_PASSWORD_LENGTH,required:true}),errorMessage&&/*#__PURE__*/_jsx(\"span\",{className:styles.error,children:errorMessage}),/*#__PURE__*/_jsx(Button,{type:\"submit\",kind:\"secondary\",text:\"\\u0412\\u043E\\u0439\\u0442\\u0438\",extraClass:styles.btn,disabled:submitDisabled})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.links_box,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main text_color_primary mb-9 \".concat(styles.text),children:\"\\u0412\\u044B \\u2014 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C?\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",className:\"text text_type_button text_color_primary \".concat(styles.nav),children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})]});};","map":{"version":3,"names":["useState","useContext","NavLink","useHistory","Input","Button","getOwnUser","loginUser","UserContext","MINIMUM_USERNAME_LENGTH","MINIMUM_PASSWORD_LENGTH","styles","jsx","_jsx","jsxs","_jsxs","SignIn","_ref","extraClass","_userCtx","setUserCtx","userData","setUserData","username","password","errorMessage","setErrorMessage","history","usernameValid","length","passwordValid","submitDisabled","onChangeInput","e","_objectSpread","target","name","value","authorizeUser","event","preventDefault","response","access_token","user","replace","pathname","err","message","className","concat","content","children","title","form","onSubmit","type","id","placeholder","label","onChange","minLength","required","error","kind","text","btn","disabled","links_box","to","nav"],"sources":["/Users/alenasenozenskaya/nodejs-docker-and-compose/frontend/src/components/sign-in/sign-in.jsx"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\";\n\nimport { Input, Button } from \"../ui\";\n\nimport { getOwnUser, loginUser } from \"../../utils/api\";\n\nimport { UserContext } from \"../../utils/context\";\n\nimport {\n  MINIMUM_USERNAME_LENGTH,\n  MINIMUM_PASSWORD_LENGTH,\n} from \"../../utils/constants\";\n\nimport styles from \"./sign-in.module.css\";\n\nexport const SignIn = ({ extraClass = \"\" }) => {\n  const [_userCtx, setUserCtx] = useContext(UserContext);\n  const [userData, setUserData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const history = useHistory();\n\n  const usernameValid = userData.username.length >= MINIMUM_USERNAME_LENGTH;\n  const passwordValid = userData.password.length >= MINIMUM_PASSWORD_LENGTH;\n  const submitDisabled = !usernameValid || !passwordValid;\n\n  const onChangeInput = (e) => {\n    setUserData({\n      ...userData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const authorizeUser = async (event) => {\n    event.preventDefault();\n    errorMessage && setErrorMessage(\"\");\n    try {\n      const response = await loginUser(userData.username, userData.password);\n      if (response && response.access_token) {\n        const user = await getOwnUser();\n        setUserCtx(user);\n        history.replace({ pathname: \"/gifts/line\" });\n      }\n    } catch (err) {\n      setErrorMessage(err.message);\n    }\n  };\n\n  return (\n    <div className={`${styles.content} ${extraClass}`}>\n      <h2\n        className={`text text_type_h2 text_color_primary mb-16 ${styles.title}`}\n      >\n        Вход\n      </h2>\n      <form className={styles.form} onSubmit={authorizeUser}>\n        <Input\n          name={\"username\"}\n          type=\"text\"\n          id={1}\n          placeholder=\"Введите имя пользователя\"\n          label=\"Юзернейм\"\n          onChange={onChangeInput}\n          extraClass=\"mb-16\"\n          minLength={MINIMUM_USERNAME_LENGTH}\n          required={true}\n        />\n        <Input\n          name={\"password\"}\n          type=\"password\"\n          id={2}\n          placeholder=\"Введите пароль\"\n          label=\"Пароль\"\n          onChange={onChangeInput}\n          minLength={MINIMUM_PASSWORD_LENGTH}\n          required={true}\n        />\n        {errorMessage && <span className={styles.error}>{errorMessage}</span>}\n        <Button\n          type=\"submit\"\n          kind=\"secondary\"\n          text=\"Войти\"\n          extraClass={styles.btn}\n          disabled={submitDisabled}\n        />\n      </form>\n      <div className={styles.links_box}>\n        <p\n          className={`text text_type_main text_color_primary mb-9 ${styles.text}`}\n        >\n          Вы — новый пользователь?\n        </p>\n        <NavLink\n          to=\"/signup\"\n          className={`text text_type_button text_color_primary ${styles.nav}`}\n        >\n          Зарегистрироваться\n        </NavLink>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}